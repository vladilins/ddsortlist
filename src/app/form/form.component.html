<button (click)="addNewTemplate()">Add new Template</button><br /><br />
<form [formGroup]="myForm">
  <div
    formArrayName="template_details"
    cdkDropList
    (cdkDropListDropped)="drop($event)"
    [cdkDropListData]="myForm.get('template_details').controls"
  >
    <div
      *ngFor="
        let temp of myForm.get('template_details').controls;
        let i = index
      "
      [cdkDragData]="temp"
      cdkDrag
    >
      <fieldset class="margin">
        <legend>
          <h3>Template {{ i + 1 }}:</h3>
        </legend>
        <span cdkDragHandle class="drag">Drag</span>
        <div [formGroupName]="i">
          <label>Template Name: </label>
          <input formControlName="template_name" />
          <div formArrayName="template_data">
            <div
              *ngFor="
                let property of temp.get('template_data').controls;
                let j = index
              "
            >
              <fieldset class="right">
                <legend>
                  <h4>Property {{ j + 1 }}</h4>
                </legend>
                <div [formGroupName]="j">
                  <label>Property Name:</label>
                  <input formControlName="propertyOne" />
                </div>
              </fieldset>
            </div>
            <button (click)="addNewProperty(temp.controls.template_data)">
              Add new Property
            </button>
          </div>
        </div>
      </fieldset>
    </div>
  </div>
  <br />
</form>

<pre>{{ myForm.value | json }}</pre>
